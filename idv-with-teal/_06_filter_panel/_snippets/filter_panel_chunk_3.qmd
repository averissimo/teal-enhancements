# Application with save/restore capabilities
save_restore_demo <- teal::init(
  data = demo_data,
  modules = teal::modules(
    tm_data_table(
      label = "ADSL Data",
      dataname = "ADSL"
    ),
    tm_g_distribution(
      label = "Age Distribution",
      dataname = "ADSL",
      dist_var = data_extract_spec(
        dataname = "ADSL",
        select = select_spec(
          choices = variable_choices("ADSL", "AGE"),
          selected = "AGE"
        )
      ),
      strata_var = data_extract_spec(
        dataname = "ADSL",
        select = select_spec(
          choices = variable_choices("ADSL", "ARM"),
          selected = "ARM"
        )
      )
    )
  )
)

# In the application, you can:
# 1. Apply filters (e.g., ARM = "Placebo", AGE = 30-70)
# 2. Click "Show R Code" to see filter state
# 3. Use the bookmark feature to save the current state
# 4. Export filter state as R code for reproducibility

if (interactive()) {
  shiny::shinyApp(save_restore_demo$ui, save_restore_demo$server)
}
