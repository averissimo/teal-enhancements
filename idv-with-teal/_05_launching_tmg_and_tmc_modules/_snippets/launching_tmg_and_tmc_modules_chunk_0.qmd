library(teal)
library(teal.modules.general)
library(teal.data)
library(pharmaverseadam)

# Step 1: Load real ADaM data from pharmaverseadam
data("adsl", package = "pharmaverseadam")

# Step 2: Create teal_data object with the real dataset
clinical_data <- teal_data()
clinical_data <- within(clinical_data, {
  # Use the real ADSL dataset from pharmaverseadam
  ADSL <- adsl

  # The pharmaverseadam ADSL already contains proper CDISC variables:
  # - USUBJID (unique subject identifier)
  # - AGE, AGEGR1 (age and age groups)
  # - SEX, RACE (demographics)
  # - ARM, ACTARM (treatment arms)
  # - SAFFL, ITTFL (analysis flags)
  # - And many other standard ADaM variables
})

# Step 3: Create the teal application with tm_data_table
app <- teal::init(
  data = clinical_data,
  modules = teal::modules(
    teal.modules.tm_data_table(
      label = "Subject Data Explorer",
      dataname = "ADSL"
    )
  )
)

# Step 4: Launch the application
if (interactive()) {
  shiny::shinyApp(app$ui, app$server)
}
