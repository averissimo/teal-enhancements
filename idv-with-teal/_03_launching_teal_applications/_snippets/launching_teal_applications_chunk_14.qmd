library(teal.modules.general)

# Create rich content for the modal
modal_content <- shiny::tags$div(
  shiny::tags$h4("Welcome to Clinical Data Analysis Platform"),
  shiny::tags$p("This application provides interactive tools for exploring clinical trial data."),
  shiny::tags$hr(),
  shiny::tags$h5("Features:"),
  shiny::tags$ul(
    shiny::tags$li("Interactive data tables with filtering and sorting"),
    shiny::tags$li("Dynamic visualizations and plots"),
    shiny::tags$li("Integrated filter panel for data subsetting"),
    shiny::tags$li("Reproducible analysis with code generation")
  ),
  shiny::tags$hr(),
  shiny::tags$p(
    shiny::tags$strong("Important:"),
    " This application contains confidential clinical data. ",
    "Please ensure compliance with data governance policies."
  )
)

app <- teal::init(
  data = teal.data::teal_data(IRIS = iris, MTCARS = mtcars),
  modules = teal::modules(
    teal.modules.general::tm_data_table("Data Table", datanames = "IRIS"),
    teal.modules.general::tm_variable_browser("Variable Browser", datanames = "IRIS", parent_dataname = "IRIS")
  )
) |>
  teal::add_landing_modal(
    title = "Clinical Data Explorer v2.0",
    content = modal_content,
    footer = shiny::tagList(
      shiny::modalButton("Cancel"),
      shiny::actionButton("accept", "I Understand", class = "btn-primary")
    )
  )

if (interactive()) {
  shiny::shinyApp(app$ui, app$server)
} else {
  return(shiny::shinyApp(app$ui, app$server))
}
