# Complete troubleshooting workflow
debug_teal_app <- function() {
  # Step 1: Check data
  cat("Checking data...\n")
  if (!exists("iris")) stop("iris dataset not available")
  inspect_data(iris, "IRIS")

  # Step 2: Test minimal app
  cat("Testing minimal app...\n")
  minimal_app <- teal::init(
    data = teal.data::teal_data(IRIS = iris),
    modules = teal::modules()
  )
  cat("Minimal app created successfully\n")

  # Step 3: Test with simple module
  cat("Testing with simple module...\n")
  simple_app <- teal::init(
    data = teal.data::teal_data(IRIS = iris),
    modules = teal::modules(
      teal.modules.general::tm_data_table("Data Table", datanames = "IRIS")
    )
  )
  cat("Simple app created successfully\n")

  # Step 4: Launch if all tests pass
  if (interactive()) {
    shiny::shinyApp(simple_app$ui, simple_app$server)
  }
}

# Run diagnostic
debug_teal_app()
