{{< include ./_extensions/r-wasm/live/_knitr.qmd >}}

## Introductory video

{{< video "./_03_launching_teal_applications/intro.mp4" >}}

## What is `teal`?

`teal` is a powerful **R framework** designed to streamline the development of **interactive data analysis applications**.
Built on top of Shiny, `teal` provides a modular, standardized approach to creating sophisticated data exploration and visualization tools.

## Key characteristics of `teal`

- **üß© Modular Architecture**: Build applications using reusable, interchangeable components
- **üîÑ Reproducible Analytics**: Maintain complete analysis reproducibility with built-in code tracking
- **üë• User-Friendly Interface**: Intuitive design accessible to both developers and end-users
- **üè• Clinical Focus**: Specialized modules for pharmaceutical and clinical trial data analysis
- **üìä Interactive Exploration**: Real-time data filtering, visualization, and analysis capabilities

## Why use `teal`?

### **1. Accelerated development**
- **Pre-built modules** for common analysis tasks reduce development time
- **Standardized framework** ensures consistent application structure
- **Plug-and-play architecture** allows rapid prototyping and iteration

### **2. Enhanced reproducibility**
- **Automatic code generation** for all analysis steps
- **Built-in version tracking** of data transformations and analysis parameters
- **Complete audit trail** for regulatory and scientific compliance

### **3. Clinical data expertise**
- **CDISC/ADaM integration** with specialized data handling
- **Pharmaceutical workflows** designed for clinical trial analysis
- **Regulatory compliance** features for submission-ready documentation

### **4. Collaborative analytics**
- **Shared analysis environments** for team-based data exploration
- **Report generation** for communicating findings
- **Filter state management** for consistent analysis contexts

### **5. Scalable architecture**
- **Modular design** supports applications from simple to enterprise-scale
- **Performance optimization** for large datasets
- **Flexible deployment** options from local to cloud environments

## The simplest `teal` application

**Learning Objective:** Understand the minimal structure required to launch
a `teal` application and recognize the basic UI components.

The absolute simplest `teal` application requires just the `teal::init()` function
with just one module. This creates a `teal` application that demonstrates
the core UI structure without any additional functionality.

## The `teal` UI

When you launch this minimal application, you'll observe:

1. The `teal` header - displaying the application title
2. A main panel that shows our one empty module.
3. The filter panel on the left - ready to filter data (though no data is loaded yet)
4. The navigation structure - showing how `teal` organizes content

## Basic structure

Every `teal` application follows this fundamental pattern:

- Initialization using `teal::init()`
- Data specification (must be specified)
- Modules definition (empty module in this case)
- Application launch using the usual Shiny API

## How to run `shiny` applications on `shinylive.io`

{{< video "../_03_launching_teal_applications/launching-0.mp4" >}}

## Code example

[Run this code in Shinylive](https://shinylive.io/r/examples/#gist=1722da3b788b4d3a5aa6e1cb8bc725de)
```{webr}
{{< include _03_launching_teal_applications/_snippets/launching_teal_applications_chunk_0.qmd >}}
```

## What this demonstrates

This minimal example shows you:

- The `teal` framework structure - even without modules, you can see how `teal` organizes the interface
- The filter panel - appears on the left side, ready to work with data when available
- The modular architecture - the list in the top left shows the module list (with just one module for now)
- The initialization pattern - `teal::init()` is the entry point for all `teal` applications

## Key observations

1. The UI is responsive - the framework is fully functional even without much content.
2. This same pattern scales to complex applications - this training will use the same
   pattern throughout - passing data and modules to `teal::init`.

## Next steps

While this minimal application doesn't do much, it establishes the foundation.
In the next section, we'll add a simple module to see how `teal` displays
content and how the different UI panels work together.

## `teal` application with a module

**Learning Objective:** Understand how modules are displayed in the `teal` UI and identify the key interface components (module area, filter panel, navigation).

Now let's add some actual functionality by including a simple module.
This will help you understand how `teal` organizes content and where different UI elements appear.
The module we will be using is already built for us - it's from `teal.modules.general`(https://github.com/insightsengineering/teal.modules.general)

## What you'll see

When you launch this application with a module, you'll observe:

1. **Module navigation** - A dropdown or tab structure showing available modules
2. **The main content area** - Where the selected module's output is displayed
3. **The filter panel** - Now more prominent since we have data to filter
4. **Module-specific controls** - Input elements that control the module's behavior

## Understanding the UI layout

`teal` applications follow a consistent layout pattern:

- **Top**: Application header with title and navigation
- **Left**: Filter panel for dynamic data filtering
- **Center**: Main content area where modules display their output
- **Module controls**: Usually integrated within the main content area

## Code example

[Run this code in Shinylive](https://shinylive.io/r/examples/#gist=02c8a16cf630ecb37a100b956a2d9939)
```{webr}
{{< include _03_launching_teal_applications/_snippets/launching_teal_applications_chunk_1.qmd >}}
```

## What this demonstrates

This example shows you:

- **Module integration** - How `tm_data_table` appears in the interface
- **Data connection** - How the module connects to the `IRIS` dataset
- **Filter panel activation** - The filter panel now shows filtering options for the iris data
- **Navigation structure** - If you had multiple modules, you'd see navigation between them

## Key UI components explained

1. **Module Area (Center)**:
   - Displays the active module's output
   - In this case, shows the iris dataset in a table format
   - Includes module-specific controls and options

2. **Filter Panel (Left)**:
   - Shows all available datasets (IRIS, MTCARS in this example)
   - Provides filtering controls for each variable in each dataset
   - Filters apply across all modules that use the same data

3. **Module Navigation**:
   - When you have multiple modules, navigation appears at the top
   - Shows module labels and allows switching between different analyses
   - In this single-module example, navigation is minimal

## Interactive features

Try these interactions in the application:

1. **Filtering**: Use the filter panel to subset the iris data (e.g., filter by Species)
2. **Table exploration**: Sort and search within the data table
3. **Responsive design**: Resize the browser to see how the layout adapts

## Observations about `teal`'s design

- **Consistent layout** - Every `teal` app follows the same visual pattern
- **Integrated filtering** - Filters work seamlessly with all modules
- **Modular content** - Each module occupies the same content area
- **Data awareness** - The filter panel automatically adapts to your datasets

## Understanding `teal::init` and its components

**Learning Objective:** Master the `teal::init()` function by understanding its key arguments and how they work together to create a complete `teal` application.

The `teal::init()` function is the heart of every `teal` application. It brings together your data, modules, and configuration options to create a functional interactive application.

### The `teal::init()` function signature

[Run this code in Shinylive](https://shinylive.io/r/examples/#gist=38bb0e2bd8e22e2b5d144111d7d38685)
```{webr}
{{< include _03_launching_teal_applications/_snippets/launching_teal_applications_chunk_2.qmd >}}
```

## The `data` argument - your application's foundation

The `data` argument is where you specify all the datasets your application will use.
There are several ways to provide data to `teal`:

- using `teal_data()`
- using `cdisc_data()` for clinical data

## Option 1: Using `teal_data()`

[Run this code in Shinylive](https://shinylive.io/r/examples/#gist=29459fe05626dbc082531a3726031061)
```{webr}
{{< include _03_launching_teal_applications/_snippets/launching_teal_applications_chunk_3.qmd >}}
```

## Option 2: Using `cdisc_data()` for clinical data

[Run this code in Shinylive](https://shinylive.io/r/examples/#gist=929e3934249144531c64b70e542d0b6e)
```{webr}
{{< include _03_launching_teal_applications/_snippets/launching_teal_applications_chunk_4.qmd >}}
```

## What the `data` argument controls:

- **Available datasets** - Which datasets appear in the filter panel
- **Data relationships** - How datasets connect to each other (via `join_keys`)
- **Reproducibility** - Code tracking for generating the data

## The `modules` argument - your application's functionality

The `modules` argument defines what your application can do.
It accepts a `modules()` object containing one or more `teal` modules.

## Single module example

[Run this code in Shinylive](https://shinylive.io/r/examples/#gist=debd6b8d844ddf8033d49c570aed013f)
```{webr}
{{< include _03_launching_teal_applications/_snippets/launching_teal_applications_chunk_5.qmd >}}
```

## Multiple modules example

[Run this code in Shinylive](https://shinylive.io/r/examples/#gist=b058bdbe71d3d4053180ab97d45f2b48)
```{webr}
{{< include _03_launching_teal_applications/_snippets/launching_teal_applications_chunk_6.qmd >}}
```

## Nested modules example

[Run this code in Shinylive](https://shinylive.io/r/examples/#gist=6284a764f2e162dc722f2085a9ea5dda)
```{webr}
{{< include _03_launching_teal_applications/_snippets/launching_teal_applications_chunk_7.qmd >}}
```

## How `data` and `modules` work together

The relationship between `data` and `modules` is crucial:

1. **Data availability** - Modules can only use datasets specified in the `data` argument
2. **Filter integration** - The filter panel shows all datasets from `data`, and filters apply to all modules using those datasets
3. **Code reproducibility** - `teal` tracks how data flows from the `data` argument through filters to modules

## Complete example with both arguments

[Run this code in Shinylive](https://shinylive.io/r/examples/#gist=d5f53d323794b2cf7ac55e993a1a9b57)
```{webr}
{{< include _03_launching_teal_applications/_snippets/launching_teal_applications_chunk_8.qmd >}}
```

## Talking about `teal` application UI structure and design

{{< video "./_03_launching_teal_applications/launching-01.mp4" >}}

## Key insights about `teal::init()`

1. **Data-first approach** - Always define your data structure before configuring modules
2. **Module flexibility** - You can mix different types of modules in the same application
3. **Automatic integration** - `teal` handles the connections between data, filters, and modules
4. **Scalable structure** - The same pattern works for simple and complex applications

## Common patterns

- **Start simple** - Begin with one dataset and one module, then add complexity
- **Group related modules** - Use nested `modules()` to organize functionality
- **Match data to modules** - Ensure each module's `dataname` exists in your `data` argument
- **Plan your data structure** - Consider what datasets and relationships you need before building modules

## Additional modifiers for `teal` applications

**Learning Objective:** Learn how to customize `teal` application appearance and user experience using modifier functions and landing modals.

Beyond the core `data` and `modules` arguments, `teal` provides several functions to enhance your application's appearance and user experience. These modifiers allow you to customize the title, header, footer, and add welcome messages to create a more professional and user-friendly application.

## Understanding `teal` modifiers

`teal` uses a pipe-friendly approach for application customization. After creating your base application with `teal::init()`, you can chain modifier functions to customize various aspects of the interface.

## Customizing the application title

The `modify_title()` function changes the title that appears in the browser tab and can affect the main header display.

[Run this code in Shinylive](https://shinylive.io/r/examples/#gist=c1699ad621afc0db713527f6ccf2d6cf)
```{webr}
{{< include _03_launching_teal_applications/_snippets/launching_teal_applications_chunk_9.qmd >}}
```

## Customizing the header

The `modify_header()` function allows you to replace or enhance the default header with custom HTML content.

[Run this code in Shinylive](https://shinylive.io/r/examples/#gist=b70a720e0c922b223ac80c4e32ea3b6d)
```{webr}
{{< include _03_launching_teal_applications/_snippets/launching_teal_applications_chunk_10.qmd >}}
```

## Customizing the footer

The `modify_footer()` function adds or replaces footer content, useful for disclaimers, contact information, or version details.

[Run this code in Shinylive](https://shinylive.io/r/examples/#gist=49265e1c391d9d411e276b14e3daf45f)
```{webr}
{{< include _03_launching_teal_applications/_snippets/launching_teal_applications_chunk_11.qmd >}}
```

## Combining multiple modifiers

You can chain multiple modifiers together to create a fully customized application:

[Run this code in Shinylive](https://shinylive.io/r/examples/#gist=d437e00dc5723a8b9c90c8519670a9e9)
```{webr}
{{< include _03_launching_teal_applications/_snippets/launching_teal_applications_chunk_12.qmd >}}
```

## Adding a landing modal

The `add_landing_modal()` function creates a welcome dialog that appears when users first access your application. This is perfect for providing instructions, disclaimers, or important announcements.

## Basic landing modal

[Run this code in Shinylive](https://shinylive.io/r/examples/#gist=86ae8a2b8cfe5dad4bd4d8bf3e95a211)
```{webr}
{{< include _03_launching_teal_applications/_snippets/launching_teal_applications_chunk_13.qmd >}}
```

## Advanced landing modal with rich content

[Run this code in Shinylive](https://shinylive.io/r/examples/#gist=90facacf6648b2890d179af8647b19e0)
```{webr}
{{< include _03_launching_teal_applications/_snippets/launching_teal_applications_chunk_14.qmd >}}
```

## Putting everything to use

{{< video "./_03_launching_teal_applications/launching-02.mp4" >}}


## Best practices for application modifiers

1. **Keep headers concise** - Headers should be informative but not overwhelming
2. **Use consistent styling** - Match your organization's branding guidelines
3. **Include important disclaimers** - Use footers for legal or contact information
4. **Make landing modals informative** - Provide clear instructions and expectations
5. **Consider mobile users** - Ensure custom elements work on different screen sizes

## Common use cases

- **Corporate branding** - Add company logos and colors to headers
- **Regulatory compliance** - Include required disclaimers in footers or landing modals
- **User guidance** - Use landing modals to explain application purpose and usage
- **Version information** - Display version numbers and update dates in footers
- **Contact information** - Provide support contacts in footers

## Key points to remember

- **Modifier functions are chainable** - Use the pipe operator `|>` to combine multiple modifications
- **HTML content is supported** - Use `tags$` functions to create rich, styled content
- **Modals appear on load** - Landing modals automatically display when the application starts
- **Styling is customizable** - Use CSS styles to match your organization's design requirements

## Troubleshooting common launch issues

**Learning Objective:** Identify and resolve common problems that occur when launching `teal` applications, enabling you to debug and fix issues independently.

Even well-constructed `teal` applications can encounter launch issues. Understanding common problems and their solutions will help you develop more robust applications and troubleshoot issues quickly.

## Common error categories

`teal` launch issues typically fall into these categories:

1. **Data-related errors** - Problems with data structure or content
2. **Module configuration errors** - Incorrect module setup or parameters
3. **Dependency issues** - Missing packages or version conflicts
4. **Memory and performance issues** - Large datasets or complex operations

## Problem: "object not found" errors

[Run this code in Shinylive](https://shinylive.io/r/examples/#gist=7620aef81214359cd182640178e4aa9f)
```{webr}
{{< include _03_launching_teal_applications/_snippets/launching_teal_applications_chunk_15.qmd >}}
```

**Error message:** `Error: object 'MTCARS' not found`

**Solution:** Ensure all `dataname` arguments in modules match datasets in your `data` argument.

[Run this code in Shinylive](https://shinylive.io/r/examples/#gist=90fcc20d8de7197ecce6a578f71aebe0)
```{webr}
{{< include _03_launching_teal_applications/_snippets/launching_teal_applications_chunk_16.qmd >}}
```

## Problem: empty or NULL data

[Run this code in Shinylive](https://shinylive.io/r/examples/#gist=0bf339b30927d38aa4016246ecb7a58b)
```{webr}
{{< include _03_launching_teal_applications/_snippets/launching_teal_applications_chunk_17.qmd >}}
```

**Symptoms:** Application launches but modules show no content or errors

**Solution:** Always validate your data before passing to `teal_data()`:

[Run this code in Shinylive](https://shinylive.io/r/examples/#gist=6955d4dfc7cd2f457200be7b7eaeca64)
```{webr}
{{< include _03_launching_teal_applications/_snippets/launching_teal_applications_chunk_18.qmd >}}
```

## Problem: incorrect `data_extract_spec` configuration

[Run this code in Shinylive](https://shinylive.io/r/examples/#gist=d64fa876559831b3d5d719ca8b429aec)
```{webr}
{{< include _03_launching_teal_applications/_snippets/launching_teal_applications_chunk_19.qmd >}}
```

**Error message:** Variable selection errors or empty dropdowns

**Solution:** Use `variable_choices()` with existing column names or let it auto-detect:

[Run this code in Shinylive](https://shinylive.io/r/examples/#gist=f2943554d2db7653f9e2eee72a738f8c)
```{webr}
{{< include _03_launching_teal_applications/_snippets/launching_teal_applications_chunk_20.qmd >}}
```

## Problem: missing required module arguments

[Run this code in Shinylive](https://shinylive.io/r/examples/#gist=42056bb55295a4f83a9854adfca35708)
```{webr}
{{< include _03_launching_teal_applications/_snippets/launching_teal_applications_chunk_21.qmd >}}
```

**Solution:** Always check module documentation for required arguments:

[Run this code in Shinylive](https://shinylive.io/r/examples/#gist=5e765a54c2773d1d45858f8c1ba37b02)
```{webr}
{{< include _03_launching_teal_applications/_snippets/launching_teal_applications_chunk_22.qmd >}}
```

## Problem: package not installed or wrong version

**Error messages:**

- `Error: there is no package called 'teal.modules.general'`
- `Error: namespace 'teal' X.Y.Z is already loaded, but >= A.B.C is required`

**Solution:** Check and install required packages:

[Run this code in Shinylive](https://shinylive.io/r/examples/#gist=1531bab576d11e042bc3f3b4852ed48e)
```{webr}
{{< include _03_launching_teal_applications/_snippets/launching_teal_applications_chunk_23.qmd >}}
```

## Problem: conflicting package versions

**Solution:** Use a consistent package environment:

[Run this code in Shinylive](https://shinylive.io/r/examples/#gist=cdbb447bc14c2a6b9c51b83422d35339)
```{webr}
{{< include _03_launching_teal_applications/_snippets/launching_teal_applications_chunk_24.qmd >}}
```

## Problem: application takes too long to load or crashes

**Symptoms:**

- Long loading times
- Browser timeout
- R session crashes

**Solutions:**

1. **Reduce data size for testing:**

[Run this code in Shinylive](https://shinylive.io/r/examples/#gist=1ea82cfb3a5b3aca7fa07f26d8db46c1)
```{webr}
{{< include _03_launching_teal_applications/_snippets/launching_teal_applications_chunk_25.qmd >}}
```

2. **Optimize data types:**

[Run this code in Shinylive](https://shinylive.io/r/examples/#gist=2f0b59091b35c398994d96404d376c39)
```{webr}
{{< include _03_launching_teal_applications/_snippets/launching_teal_applications_chunk_26.qmd >}}
```

## Debugging strategies

1. Incremental development
2. Check data structure
3. Test modules individually

## 1. Incremental development

Start simple and add complexity gradually:

[Run this code in Shinylive](https://shinylive.io/r/examples/#gist=b3efb253cf460618177258598cb13665)
```{webr}
{{< include _03_launching_teal_applications/_snippets/launching_teal_applications_chunk_27.qmd >}}
```

## 2. Check data structure

Always inspect your data before using it:

[Run this code in Shinylive](https://shinylive.io/r/examples/#gist=45d853f175eec8fe6e557d6343742b54)
```{webr}
{{< include _03_launching_teal_applications/_snippets/launching_teal_applications_chunk_28.qmd >}}
```

## 3. Test modules individually

Test each module separately before combining:

[Run this code in Shinylive](https://shinylive.io/r/examples/#gist=beac3ba006c577860c8275f39397e0d7)
```{webr}
{{< include _03_launching_teal_applications/_snippets/launching_teal_applications_chunk_29.qmd >}}
```

## Common warning messages and solutions

## Warning: "No data available for filtering"

**Cause:** Filter panel can't find filterable variables
**Solution:** Ensure your data has appropriate variable types:

[Run this code in Shinylive](https://shinylive.io/r/examples/#gist=64969092dc0d9511ee6ca09cc33a33de)
```{webr}
{{< include _03_launching_teal_applications/_snippets/launching_teal_applications_chunk_30.qmd >}}
```

## Warning: "Module produces no output"

**Cause:** Module configuration doesn't match data structure
**Solution:** Check variable names and types match module expectations

## Quick diagnostic checklist

When your `teal` application won't launch, check:

1. ‚úÖ **Data exists and has content** - `nrow(data) > 0`
2. ‚úÖ **All datanames in modules exist in data** - Match names exactly
3. ‚úÖ **Required packages are loaded** - `library()` calls at top
4. ‚úÖ **Variable names are correct** - Check spelling and case
5. ‚úÖ **Data types are appropriate** - Factors for categorical, numeric for continuous
6. ‚úÖ **No circular dependencies** - Modules don't reference each other incorrectly

## Getting help

When you encounter issues:

1. **Read error messages carefully** - They often contain the exact problem
2. **Check the console** - Look for warnings and additional error details
3. **Use `traceback()`** - Shows the call stack when errors occur
4. **Simplify your code** - Remove complexity until it works, then add back gradually
5. **Check documentation** - Verify function arguments and usage examples

## Example: complete diagnostic workflow

[Run this code in Shinylive](https://shinylive.io/r/examples/#gist=411ce2b9a887b792e941debf55ad2b02)
```{webr}
{{< include _03_launching_teal_applications/_snippets/launching_teal_applications_chunk_31.qmd >}}
```

Remember: Most `teal` launch issues are due to data-module mismatches or missing dependencies.
Start with the basics and build complexity gradually.
